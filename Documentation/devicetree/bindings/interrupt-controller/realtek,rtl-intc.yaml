# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/interrupt-controller/realtek,rtl-intc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Realtek RTL SoC interrupt controller devicetree bindings

description:
  Interrupt router for Realtek MIPS SoCs, allowing each SoC interrupt to be
  routed to one parent interrupt, or left disconnected.

maintainers:
  - Birger Koblitz <mail@birger-koblitz.de>
  - Bert Vermeulen <bert@biot.com>
  - John Crispin <john@phrozen.org>

properties:
  compatible:
    oneOf:
      - items:
          - enum:
              - realtek,rtl8380-intc
              - realtek,rtl8390-intc
              - realtek,rtl9300-intc
          - const: realtek,rtl-intc
      - const: realtek,rtl-intc
        deprecated: true

  "#interrupt-cells": true

  reg: true

  interrupts:
    minItems: 1
    maxItems: 15
    description:
      List of parent interrupts, in the order that they are connected to this
      interrupt router's outputs.

  interrupt-controller: true

required:
  - compatible
  - reg
  - "#interrupt-cells"
  - interrupt-controller

allOf:
  - if:
      properties:
        compatible:
          const: realtek,rtl-intc
    then:
      properties:
        "#interrupt-cells":
          const: 1

        "#address-cells":
          const: 0

        interrupt-map: true
      required:
        - "#address-cells"
        - interrupt-map
    else:
      properties:
        "#interrupt-cells":
          description:
            Two cells to specify which line to connect to, and which output it should
            be routed to. Both cells use a zero-based index.
          const: 2
      required:
        - interrupts
  - if:
      properties:
        compatible:
          contains:
            enum:
              - realtek,rtl8390-intc
              - realtek,rtl9300-intc
    then:
      properties:
        reg:
          items:
            - description: CPU0 control registers
            - description: CPU1 control registers
    else:
      properties:
        reg:
          maxItems: 1

additionalProperties: false

examples:
  - |
    intc: interrupt-controller@3000 {
      compatible = "realtek,rtl8380-intc", "realtek,rtl-intc";
      #interrupt-cells = <2>;
      interrupt-controller;
      reg = <0x3000 0x18>;

      interrupt-parent = <&cpuintc>;
      interrupts = <2>, <3>, <4>, <5>, <6>;
    };

    irq-consumer@0 {
      reg = <0 4>;
      interrupt-parent = <&intc>;
      interrupts =
        <19 3>, /* IRQ 19, routed to output 3 (cpuintc 5) */
        <18 4>; /* IRQ 18, routed to output 4 (cpuintc 6) */
    };
